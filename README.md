# project-playwight

Playwright test automation project for Buggy Cars Rating (example).

## Summary

This repository contains Playwright tests (TypeScript) using a Page Object Model. Environment variables are loaded from files in `env-files/` via `dotenv` and selected using the `ENV_NAME` environment variable.

## Prerequisites

- Node.js (recommended 18+)
- npm (or yarn)
- A modern OS (Windows, macOS, Linux)

## Install

1. Install dependencies:

```
npm install
```

2. Ensure the `env-files/` directory contains the environment file you want, for example: `env-files/.env.dev`.

Example environment variables used by tests (create or update your `.env.*` file accordingly):

```
BASE_URL=https://buggy.justtestit.org
USER_NAME=testuser
FIRST_NAME=Test
LAST_NAME=User
PASSWORD=Password123
ENV_NAME=dev
```

> Note: Do not commit real credentials. Keep secrets out of version control.

## How ENV files are loaded

`playwright.config.ts` uses `dotenv.config({ path: `./env-files/.env.${process.env.ENV_NAME}` })` so you must set `ENV_NAME` (for example `dev`) before running tests.

## Running tests

You can set `ENV_NAME` and run Playwright directly, or use the provided npm scripts which use `cross-env` for cross-platform compatibility.

- Run a single spec (GitBash example):

```
ENV_NAME=dev npx playwright test productvalidation.spec.ts --project=firefox --headed
```

- Use an npm script (cross-platform):

```
npm run test_devhd        # runs tests headed with ENV_NAME=dev
npm run test_devhl        # runs tests headless with ENV_NAME=dev

```
You can also run a specific project (chromium/firefox) using the other scripts defined in `package.json`.

**Project scripts**

```bash
# Run Chromium (headed) with ENV_NAME=dev
npm run testchr_devhd      # runs Chromium (headed) with ENV_NAME=dev

# Run Firefox (headed) with ENV_NAME=dev
npm run testfir_devhd      # runs Firefox (headed) with ENV_NAME=dev

# Run Mobile Chrome project (headed) with ENV_NAME=dev
npm run testchr_Mobile_devhd  # runs MobileChrome (headed) with ENV_NAME=dev

# Run Chromium (headless) with ENV_NAME=dev
npm run testchr_devhl      # runs Chromium (headless) with ENV_NAME=dev

# Run Firefox (headless) with ENV_NAME=dev
npm run testfir_devhl      # runs Firefox (headless) with ENV_NAME=dev

# Run Mobile Chrome project (headless) with ENV_NAME=dev
npm run testchr_Mobile_devhl  # runs MobileChrome (headless) with ENV_NAME=dev

# Run all tests (headless) with ENV_NAME=dev
npm run test_devhl         # runs all tests (headless) with ENV_NAME=dev

# Run all tests (headed) with ENV_NAME=dev
npm run test_devhd         # runs all tests (headed) with ENV_NAME=dev
```

## Test reports and artifacts
- HTML report is generated by the `html` reporter. To open the report after a run:

**To Open the HTML report (run this):**

```bash
npx playwright show-report
```

- Traces, screenshots, and videos are created in the `playwright-report/` and `test-results/` folders when enabled in `playwright.config.ts`.

## Project structure (high level)

- `pages/` — Page Object Model classes (page interactions)
- `tests/` — Playwright test files
- `fixtures/` — Test fixtures and test setup
- `env-files/` — Environment variable files (e.g. `.env.dev`)
- `playwright.config.ts` — Playwright configuration

## Troubleshooting

- If environment variables are `undefined`, confirm:
	- `ENV_NAME` is set (see examples above)
	- The corresponding file exists, e.g. `env-files/.env.dev`
	- The variable names inside the `.env` file match those used in tests (`USER_NAME`, `PASSWORD`, etc.)
